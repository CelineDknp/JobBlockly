

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>How to create a basic Blockly task ? &mdash; JobBlockly  documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="JobBlockly  documentation" href="index.html"/>
        <link rel="next" title="How to change the maze’s visuals" href="VisualDocumentation.html"/>
        <link rel="prev" title="Welcome to JobBlockly’s documentation!" href="index.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> JobBlockly
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">How to create a <em>basic</em> Blockly task ?</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#example-create-the-sum-function">Example : create the sum function</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="VisualDocumentation.html">How to change the maze’s visuals</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">JobBlockly</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>How to create a <em>basic</em> Blockly task ?</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/BaseBlockly.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="how-to-create-a-basic-blockly-task">
<h1>How to create a <em>basic</em> Blockly task ?<a class="headerlink" href="#how-to-create-a-basic-blockly-task" title="Permalink to this headline">¶</a></h1>
<p>There is, first, a few steps that have to (and/or can) be acheived in the INGInious interface. Those are :</p>
<ol class="arabic simple">
<li>Create the exercice as you would a classical one. Set up a title, a context, your name, the options you want,… When creating a subproblem, select “blockly” as “type of task”</li>
<li>Again, perform the set-up of the task as you normally would</li>
<li>If you want, set up the maximum number of blocks that the student can use to perform the task by entering it in the “Max number of blocks” field (by default, it is “Infinity”)</li>
<li>To keep it simple, scroll down to the bottom of the page and click on “edit toolbox/workspace graphically”</li>
</ol>
<p>Here is where you start to actually use Blockly. The screen you are on is splitted in two, the left side acting as a control pannel, and the right side showing a preview of what a student will see when performing the task.</p>
<p>On the control pannel, there is two tabs, reading “Toolbox” and “Workspace”, as well as blocks categories (“logic”, “loops”,…). You can click on them and drag/drop the blocks that you want in one or the other tab. The toolbox tab will contain all available blocks to perform the exercice, which will be “infinitely selectable” by the student. On the workspace section, you can set up a few blocks that will already be there at the start of the exercice.</p>
<div class="section" id="example-create-the-sum-function">
<h2>Example : create the sum function<a class="headerlink" href="#example-create-the-sum-function" title="Permalink to this headline">¶</a></h2>
<p>Here, we are in the case where we want the student to create a function, which means we have to provide him with it’s signature. Our Sum function needs to take in two parameters, the two numbers to sum (let’s call them a and b), and return the resulting sum.</p>
<p>First, click the “Workspace” tab and open the “Function” category. Out of the three blocks, we need the functions that returns, which reads “to do something … return”. You can set-up a tooltip if you select the blue “?” icon, and set up the parameters by clicking the blue wheel icon. Indicate your parameters name (x by default), and drag/drop the block into the right “input” block. Then, give a name to the function, here we will call it “Sum”</p>
<p>Now, let’s create a variable to hold the result. Click on the “Variables” category and select “create a variable”. Input your name, “result” for example, then select the corresponding block and plug it into the “return” spot.</p>
<p>The basic workspace is done, it is time to create the toolbox. Click on the corresponding tab, and select the blocks that you want for the task. In our case, we selected the two previously created variables “a” and “b” as well as the “fix result as” block from the variable category and the sum operator from the math category.</p>
<p>Click close, then save, and you are done with the graphical interface part of the task creation. You can now visualize your task on INGInious and connect blocks, but there is no correction or feedback yet.</p>
<p>For the feedback, you’ll have to create a <code class="docutils literal notranslate"><span class="pre">run</span></code> and a file that contains the task correction. Let’s start with that one, that we will call <code class="docutils literal notranslate"><span class="pre">sum.py</span></code>. It has to first get the student’s code with an instruction like this : <code class="docutils literal notranslate"><span class="pre">&#64;&#64;subProblemID&#64;&#64;</span></code>. Then, you will be able to call the created function with it’s name (here “Sum”), and then run any tests you want. To comply with the usual INGInious run file, you have to output “True” if the tests pass, and some feedback followed by <code class="docutils literal notranslate"><span class="pre">exit()</span></code> for a failure. The following code is an example for our sum function :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre>#Open source licence goes here

from contextlib import redirect_stdout
import random

@@Sum@@ #The id of your subproblem goes here

if __name__ == &quot;__main__&quot;:
        random.seed(55)
        for j in range(6): #lists of 6 elements
                a = random.randint(0,10)
                b = random.randint(0,10)
                result = Sum(a, b)
                if(result != (a+b)):
                        print(&quot;The sum you returned for the values &quot; + str(a) + &quot; and &quot; + str(b) +
                        &quot; is &quot; + str(result) + &quot; when the correct answer is &quot; + str(a+b) + &quot;.&quot;)
                        exit()
        print(&quot;True&quot;)
</pre></div>
</div>
<p>For such a simple task, the basic <code class="docutils literal notranslate"><span class="pre">run</span></code> file is sufficient, with only two lines to modify, where you will have to put the name of your correction file. Here is the corresponding code for our sum task:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span class="c">#Open source licence goes here</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">subprocess</span>
<span class="kn">import</span> <span class="nn">shlex</span>
<span class="kn">from</span> <span class="nn">inginious</span> <span class="kn">import</span> <span class="n">feedback</span>
<span class="kn">from</span> <span class="nn">inginious</span> <span class="kn">import</span> <span class="nb">input</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="nb">input</span><span class="o">.</span><span class="n">parse_template</span><span class="p">(</span><span class="s">&quot;sum.py&quot;</span><span class="p">)</span> <span class="c">#Replace sum.py by your filename on this line and the next</span>
    <span class="n">p</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">(</span><span class="n">shlex</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&quot;python3 sum.py&quot;</span><span class="p">),</span> <span class="n">stderr</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">STDOUT</span><span class="p">,</span> <span class="n">stdout</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">)</span>
    <span class="n">make_output</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">communicate</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s">&#39;utf-8&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">p</span><span class="o">.</span><span class="n">returncode</span><span class="p">:</span>
        <span class="n">feedback</span><span class="o">.</span><span class="n">set_global_result</span><span class="p">(</span><span class="s">&quot;failed&quot;</span><span class="p">)</span>
        <span class="n">feedback</span><span class="o">.</span><span class="n">set_global_feedback</span><span class="p">(</span><span class="s">&quot;Your code could not be executed. Please verify that all your blocks are correctly connected.&quot;</span><span class="p">)</span>
        <span class="nb">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">make_output</span> <span class="o">==</span> <span class="s">&quot;True</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">:</span>
        <span class="n">feedback</span><span class="o">.</span><span class="n">set_global_result</span><span class="p">(</span><span class="s">&quot;success&quot;</span><span class="p">)</span>
        <span class="n">feedback</span><span class="o">.</span><span class="n">set_global_feedback</span><span class="p">(</span><span class="s">&quot;You solved the task !&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">feedback</span><span class="o">.</span><span class="n">set_global_result</span><span class="p">(</span><span class="s">&quot;failed&quot;</span><span class="p">)</span>
        <span class="n">feedback</span><span class="o">.</span><span class="n">set_global_feedback</span><span class="p">(</span><span class="s">&quot;You made a mistake ! &quot;</span> <span class="o">+</span> <span class="n">make_output</span><span class="p">)</span>
</pre></div>
</div>
<p>Those two files need to go in your task folder, and the task creation is complete !</p>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="VisualDocumentation.html" class="btn btn-neutral float-right" title="How to change the maze’s visuals" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral" title="Welcome to JobBlockly’s documentation!" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Celine Deknop.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>